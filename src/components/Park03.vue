<!--
* @name 03_停车指引图_5-10号门_驶入&驶出
* @date 2022-03-04 19:16:48
* @version V1.0.0
!-->
<template>
  <div class="relative box bg-gray-600">
    <div class="o1 hidden">
      <span
        class="
          enterTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶入
      </span>
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="qidian absolute z-30"
        style="top: 1143px; left: 191px"
      />
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="zhongdian absolute z-30"
        style="top: 533px; left: 222px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi absolute z-30"
        style="top: 470px; left: 215px"
      />
      <img
        src="../assets/unShareImg/驶入路劲-03.png"
        alt=""
        class="enterSVG absolute z-10"
        style="top: 536px; left: 165px"
      />
    </div>
    <div class="o2 hidden">
      <span
        class="
          outTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶出
      </span>
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="qidian2 absolute z-30"
        style="top: 533px; left: 222px"
      />
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="zhongdian2 absolute z-30"
        style="top: 1156px; left: 306px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi2 absolute z-30"
        style="top: 1100px; left: 298px"
      />
      <img
        src="../assets/unShareImg/驶出路劲-03.png"
        alt=""
        class="outSVG absolute z-10"
        style="top: 536px; left: 165px"
      />
    </div>
    <img src="../assets/shareImg/car.png" alt="" class="car absolute z-50" />
    <img
      src="../assets/shareImg/car2.png"
      alt=""
      class="car2 car2style absolute z-40"
    />
    <img
      src="../assets/shareImg/car3left.png"
      alt=""
      class="car3 car3style absolute z-50 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou2 absolute z-10 hidden" /> -->
    <svg
      width="750px"
      height="1206px"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g
        id="页面-1"
        stroke="none"
        stroke-width="1"
        fill="none"
        fill-rule="evenodd"
      >
        <g id="mapsvg">
          <rect id="矩形" x="0" y="0" width="750" height="1206"></rect>
          <path
            d="M205,1148 C202.952543,1148.10757 220,1152.91425 220,1133 C220,1113.08575 220,1029.43476 219,960.5 C218.666638,937.519787 223,918.714157 215,904.194118 C207,889.674079 180.097846,864.436342 175.841157,851.824824 C173.398019,844.586413 172.176451,809.978138 172.176451,748 C169.90777,632.230811 169.574437,569.995686 171.176451,561.294627 C173.765384,547.233288 180.913973,544.989168 188,541.573333 C193.441779,538.950112 205.949842,538.098386 225.52419,539.018156"
            id="jiantou"
          ></path>
          <path
            d="M76.212169,1146.12052 L179.708533,1146.12052 C179.964155,1045.38343 179.964155,990.901985 179.708533,982.676176 C178.597005,946.907781 179.708533,972.105789 179.708533,953.216121 C179.708533,934.326452 182.650122,910.524876 172.265918,891.851081 C167.26348,882.855254 144.212179,861.833754 138.039029,850.226246 C137.218474,850.226246 129.799907,816.20511 129.799907,795.050781 C129.799907,788.979743 129.799907,703.890999 129.799907,539.78455 C130.151282,533.261517 135.521353,530 145.910121,530 C156.298889,530 180.662182,530 219,530"
            id="car"
          ></path>
          <path
            d="M219,530 C194.995724,530 176.719366,530 164.170926,530 C145.348267,530 144.648483,530 144.648483,508.513758 C144.648483,494.189597 144.648483,476.323157 144.648483,454.914437"
            id="car2"
          ></path>
          <path
            d="M144.648483,454.914437 L144.648483,844.920533 C172.098989,871.918121 185.824241,889.308214 185.824241,897.090811 C185.824241,904.873407 185.824241,983.333312 185.824241,1132.47052 C184.372672,1148.58346 191.42912,1156.72202 206.993586,1156.88621 C222.558052,1157.05039 258.602604,1157.05039 315.127244,1156.88621"
            id="out"
          ></path>
          <path
            d="M230.057163,539.175181 L204.46308,538.659994 C180.933766,539.003452 169.5067,550.488233 170.181882,573.114338 C170.702824,590.571693 172.719149,773.931714 172.895284,780 C173.159045,789.087262 172.895284,801.103008 172.895284,814.49419 C172.895284,851.824824 177.420702,856.131441 184.563789,865.598351 C195.171332,879.656791 219.013219,902.689087 219.013219,921.496233 C219.013219,940.303378 219.159929,1129.72415 219.013219,1138.49899 C218.866509,1147.27383 218.85329,1159.54118 235.758202,1159 C247.028143,1158.63922 275.775409,1158.63922 322,1159"
            id="jiantou2"
          ></path>
        </g>
      </g>
    </svg>
    <img src="../assets/shareImg/mapbg.png" alt="" class="dbg absolute top-0" />
    <!-- <img src="../assets/shareImg/mapbg.png" alt="" class="absolute top-0 opacity-50" /> -->
  </div>
</template>

<script>
export default {
  name: "Park03",
  props: {
    msg: String,
  },
  mounted() {
    setTimeout(() => {
      this.$anime({
        targets: ".demo",
        translateX: 250,
      });
      console.log(
        'this.$anime.path("#jiantou") :>> ',
        this.$anime.path("#jiantou")
      );

      let path = this.$anime.path("#jiantou");
      let path2 = this.$anime.path("#car");
      let path3 = this.$anime.path("#car2");
      let path4 = this.$anime.path("#out");
      let path5 = this.$anime.path("#jiantou2");

      let myTimeline = this.$anime.timeline();
      myTimeline
        .add({
          targets: ".o1",
          delay: 1000,
          // easing: "linear",
          loopComplete: function () {
            console.log("o1 结束");
            const el = document.querySelector(".o1");
            el.classList.remove("hidden");
            const el2 = document.querySelectorAll(".jiantou");
            el2.forEach((el) => {
              el.classList.remove("hidden");
            });
          },
        })
        .add(
          {
            targets: ".jiantou",
            translateX: path("x"),
            translateY: path("y"),
            rotate: path("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
          },
          "+=1000"
        )
        .add(
          {
            targets: ".car",
            translateX: path2("x"),
            translateY: path2("y"),
            rotate: path2("angle"),
            easing: "linear",
            opacity: 1,
            delay: 0,
            duration: 4500,
            loop: false,
            loopComplete: function () {
              let car = document.querySelector(".car");
              let car2 = document.querySelector(".car2");
              car2.classList.remove("hidden");
              car.classList.add("hidden");
              car2.classList.remove("car2style");
              setTimeout(() => {
                let el = document.querySelector(".o1");
                el.classList.add("hidden");
                const el2 = document.querySelectorAll(".jiantou");
                el2.forEach((el) => {
                  el.classList.add("hidden");
                });
              }, 1000);
              setTimeout(() => {
                let el = document.querySelector(".o2");
                el.classList.remove("hidden");
              }, 2000);
            },
          },
          "-=4200"
        )
        .add({
          targets: ".car2",
          translateX: path3("x"),
          translateY: path3("y"),
          rotate: path3("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 2000,
          loop: false,
          begin: function () {
            let car2 = document.querySelector(".car2");
            car2.classList.remove("car2style");
          },
        })
        .add({
          targets: ".car3",
          translateX: path4("x"),
          translateY: path4("y"),
          rotate: path4("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 4000,
          loop: false,
          loopComplete: function () {},
          begin: function () {
            // console.log('开始');
            let car2 = document.querySelector(".car2");
            car2.classList.add("hidden");
            let car3 = document.querySelector(".car3");
            car3.classList.remove("hidden");
            car3.classList.remove("car3style");
          },
        })
        .add(
          {
            targets: ".jiantou2",
            translateX: path5("x"),
            translateY: path5("y"),
            rotate: path5("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
            begin: function () {
              const el = document.querySelectorAll(".jiantou2");
              el.forEach((el) => {
                el.classList.remove("hidden");
              });
            },
          },
          "-=6000"
        );
    }, 0);
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
/* .dbg{
  position: absolute;
  top: 0;
} */
.car2style {
  position: absolute;
  top: 748px;
  left: 180px;
}
.car3style {
  top: 370px;
  left: 590px;
}

svg {
  @apply absolute top-0;
}
</style>