<!--
* @name 04_停车指引图_1-4号门_驶入&驶出
* @date 2022-03-04 19:16:48
* @version V1.0.0
!-->
<template>
  <div class="relative box bg-gray-600 boxtest">
    <div class="o1 hidden">
      <span
        class="
          enterTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶入
      </span>
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="qidian absolute z-30"
        style="top: 1143px; left: 191px"
      />
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="zhongdian absolute z-30"
        style="top: 160px; left: 222px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi absolute z-30"
        style="top: 100px; left: 214px"
      />
      <img
        src="../assets/unShareImg/驶入路劲-04.png"
        alt=""
        class="enterSVG absolute z-10"
        style="top: 165px; left: 165px"
      />
    </div>
    <div class="o2 hidden">
      <span
        class="
          outTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶出
      </span>
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="qidian2 absolute z-30"
        style="top: 160px; left: 222px"
      />
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="zhongdian2 absolute z-30"
        style="top: 1156px; left: 306px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi2 absolute z-30"
        style="top: 1100px; left: 307px"
      />
      <img
        src="../assets/unShareImg/驶出路劲-04.png"
        alt=""
        class="outSVG absolute z-10"
        style="top: 165px; left: 165px"
      />
    </div>
    <img src="../assets/shareImg/car.png" alt="" class="car absolute z-50" />
    <img
      src="../assets/shareImg/car2.png"
      alt=""
      class="car2 car2style absolute z-40 hidden"
    />
    <img
      src="../assets/shareImg/car3left.png"
      alt=""
      class="car3 car3style absolute z-50 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou2 absolute z-10 hidden" /> -->
    <svg
      width="750px"
      height="1206px"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g
        id="页面-1"
        stroke="none"
        stroke-width="1"
        fill="none"
        fill-rule="evenodd"
      >
        <g id="mapsvg">
          <rect id="矩形" x="0" y="0" width="750" height="1206"></rect>

          <path
            d="M205,1148 C202.952543,1148.10757 220,1152.91425 220,1133 C220,1113.08575 220,1029.43476 219,960.5 C218.666638,937.519787 223,918.714157 215,904.194118 C207,889.674079 180.097846,864.436342 175.841157,851.824824 C173.398019,844.586413 172.176451,809.978138 172.176451,748 C172.176451,632.789455 172.176451,570.456122 172.176451,561 C172.176451,526.759664 172.176451,455.519425 172.176451,427.621662 C172.176451,399.723899 194.088225,373.563405 194.088225,346.04067 C194.088225,325.739143 194.088225,273.797714 194.088225,190.216383 C193.362742,176.210138 196.333333,169.207015 203,169.207015 C209.666667,169.207015 221.859365,169.540349 239.578094,170.207015"
            id="jiantou"
          ></path>

          <path
            d="M76.212169,1146.12052 L179.708533,1146.12052 C179.964155,1045.38343 179.964155,990.901985 179.708533,982.676176 C178.597005,946.907781 179.708533,972.105789 179.708533,953.216121 C179.708533,934.326452 182.650122,920.524876 172.265918,901.851081 C167.26348,892.855254 154.212179,871.833754 148.039029,860.226246 C147.218474,860.226246 139.799907,816.20511 139.799907,795.050781 C139.799907,788.979743 139.799907,703.890999 139.799907,539.78455 C139.799907,462.495066 144.109242,415.587241 152.727911,399.061076 C162.88123,379.592246 158.48267,365.111887 158.48267,350.959332 C158.48267,343.446553 158.48267,284.931642 158.48267,175.414598 C159.842079,163.341486 164.552294,157.304931 172.613315,157.304931 C180.674337,157.304931 194.136565,157.304931 213,157.304931"
            id="car"
          ></path>

          <path
            d="M213,157 C202.329057,157 190.719366,157 178.170926,157 C159.348267,157 158.648483,157 158.648483,135.513758 C158.648483,121.189597 158.648483,113.323157 158.648483,111.914437"
            id="car2"
          ></path>

          <path
            d="M158.352034,111.914436 L158.352034,176.698247 C158.352034,285.597468 158.352034,347.869195 158.352034,363.513428 C158.352034,386.979777 159.398876,382.463921 151.155426,402.289041 C145.659793,415.505788 141.916341,448.236108 139.925071,500.479999 C139.925071,649.168035 139.925071,745.149614 139.925071,788.424738 C139.925071,825.665761 145.631428,855.291874 148.039029,860.226246 C158.999491,882.68969 178.882468,906.306242 179.715235,923.707305 C180.270412,935.308014 180.270412,1004.90531 179.715235,1132.4992 C182.336336,1148.59302 191.42912,1156.72202 206.993586,1156.88621 C222.558052,1157.05039 258.602604,1157.05039 315.127244,1156.88621"
            id="out"
          ></path>

          <path
            d="M239.578094,170.207015 C221.364898,169.540349 209.733013,169.207015 204.682439,169.207015 C197.106577,169.207015 194.219833,173.671907 194.219833,183.407897 C194.219833,243.27713 194.219833,296.799734 194.219833,339.695591 C194.219833,382.591447 172.176451,382.593718 172.176451,433.917991 C172.176451,521.979434 172.176451,561 172.176451,572.752215 C172.176451,584.504431 172.000316,773.931714 172.176451,780 C172.440212,789.087262 172.827429,802.289969 172.827429,815.681151 C172.827429,853.011786 177.420702,856.131441 184.563789,865.598351 C195.171332,879.656791 219.013219,902.689087 219.013219,921.496233 C219.013219,940.303378 219.159929,1129.72415 219.013219,1138.49899 C218.866509,1147.27383 218.85329,1159.54118 235.758202,1159 C247.028143,1158.63922 275.775409,1158.63922 322,1159"
            id="jiantou2"
          ></path>
        </g>
      </g>
    </svg>
    <img src="../assets/shareImg/mapbg.png" alt="" class="dbg absolute top-0" />
    <!-- <img src="../assets/shareImg/mapbg.png" alt="" class="absolute top-0 opacity-50" /> -->
  </div>
</template>

<script>
export default {
  name: "Parkdemo",
  props: {
    msg: String,
  },
  mounted() {
    setTimeout(() => {
      this.$anime({
        targets: ".demo",
        translateX: 250,
      });
      console.log(
        'this.$anime.path("#jiantou") :>> ',
        this.$anime.path("#jiantou")
      );

      let path = this.$anime.path("#jiantou");
      let path2 = this.$anime.path("#car");
      let path3 = this.$anime.path("#car2");
      let path4 = this.$anime.path("#out");
      let path5 = this.$anime.path("#jiantou2");

      let myTimeline = this.$anime.timeline({
        // direction: "alternate",
        // loop: true,
      });
      myTimeline
        .add({
          targets: ".o1",
          delay: 1000,
          // easing: "linear",
          loopComplete: function () {
            console.log("o1 结束");
            const el = document.querySelector(".o1");
            el.classList.remove("hidden");
            const el2 = document.querySelectorAll(".jiantou");
            el2.forEach((el) => {
              el.classList.remove("hidden");
            });
          },
        })
        .add(
          {
            targets: ".jiantou",
            translateX: path("x"),
            translateY: path("y"),
            rotate: path("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
          },
          "+=1000"
        )
        .add(
          {
            targets: ".car",
            translateX: path2("x"),
            translateY: path2("y"),
            rotate: path2("angle"),
            easing: "linear",
            opacity: 1,
            delay: 0,
            duration: 4500,
            loop: false,
            loopComplete: function () {
              let car = document.querySelector(".car");
              let car2 = document.querySelector(".car2");
              car2.classList.remove("hidden");
              car.classList.add("hidden");
              car2.classList.remove("car2style");
              setTimeout(() => {
                let el = document.querySelector(".o1");
                el.classList.add("hidden");
                const el2 = document.querySelectorAll(".jiantou");
                el2.forEach((el) => {
                  el.classList.add("hidden");
                });
              }, 1000);
              setTimeout(() => {
                let el = document.querySelector(".o2");
                el.classList.remove("hidden");
              }, 2000);
            },
          },
          "-=4200"
        )
        .add({
          targets: ".car2",
          translateX: path3("x"),
          translateY: path3("y"),
          rotate: path3("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 2000,
          loop: false,
          begin: function () {
            let car2 = document.querySelector(".car2");
            car2.classList.remove("car2style");
          },
        })
        .add({
          targets: ".car3",
          translateX: path4("x"),
          translateY: path4("y"),
          rotate: path4("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 4000,
          loop: false,
          loopComplete: function () {},
          begin: function () {
            // console.log('开始');
            let car2 = document.querySelector(".car2");
            car2.classList.add("hidden");
            let car3 = document.querySelector(".car3");
            car3.classList.remove("hidden");
            car3.classList.remove("car3style");
          },
        })
        .add(
          {
            targets: ".jiantou2",
            translateX: path5("x"),
            translateY: path5("y"),
            rotate: path5("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
            begin: function () {
              const el = document.querySelectorAll(".jiantou2");
              el.forEach((el) => {
                el.classList.remove("hidden");
              });
            },
          },
          "-=6000"
        );
    }, 0);
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.car2style {
  position: absolute;
  top: 748px;
  left: 180px;
}
.car3style {
  top: 370px;
  left: 590px;
}

svg {
  @apply absolute top-0;
}
</style>