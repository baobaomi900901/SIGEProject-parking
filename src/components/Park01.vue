<!--
* @name 01_停车指引图_25-30号门_驶入&驶出
* @date 2022-03-04 19:16:48
* @version V1.0.0
!-->
<template>
  <div class="relative box bg-gray-600">
    <div class="o1 hidden">
      <span
        class="
          enterTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶入
      </span>
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="qidian absolute z-30"
        style="top: 1143px; left: 191px"
      />
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="zhongdian absolute z-30"
        style="top: 453px; left: 565px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi absolute z-30"
        style="top: 383px; left: 556px"
      />
      <img
        src="../assets/unShareImg/驶入路劲-01.png"
        alt=""
        class="enterSVG absolute z-10"
        style="top: 296px; left: 157px"
      />
    </div>
    <div class="o2 hidden">
      <span
        class="
          outTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶出
      </span>
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="qidian2 absolute z-30"
        style="top: 441px; left: 592px"
      />
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="zhongdian2 absolute z-30"
        style="top: 1156px; left: 306px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi2 absolute z-30"
        style="top: 1100px; left: 298px"
      />
      <img
        src="../assets/unShareImg/驶出路劲-01.png"
        alt=""
        class="outSVG absolute z-10"
        style="top: 459px; left: 226px"
      />
    </div>
    <img src="../assets/shareImg/car.png" alt="" class="car absolute z-50" />
    <img
      src="../assets/shareImg/car2.png"
      alt=""
      class="car2 car2style absolute z-40 hidden"
    />
    <img
      src="../assets/shareImg/car3left.png"
      alt=""
      class="car3 car3style absolute z-50 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou2 absolute z-10 hidden" /> -->
    <svg
      width="750px"
      height="1206px"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g
        id="页面-1"
        stroke="none"
        stroke-width="1"
        fill="none"
        fill-rule="evenodd"
      >
        <g id="mapsvg">
          <rect id="矩形" x="0" y="0" width="750" height="1206"></rect>
          <path
            d="M199.74224,1151.37735 C206.408907,1153.04855 208.763622,1152.55136 212.961767,1146.12052 C217.159912,1139.68968 213.345201,995.01489 212.961767,982.676176 C211.850239,946.907781 216.661967,919.168546 206,903.168546 C195.338033,887.168546 190.182228,886.012432 182.182228,867.860429 C174.182228,849.708426 164.147519,797.773629 164.147519,776.6193 C164.147519,767.512743 161.807903,748.316913 161.837918,672.551687 C161.857237,630.982963 163.555458,568.923496 165.056107,505.686804 C165.056107,496.223645 164.787833,454.301408 168.611481,437.980678 C172.43513,421.659947 189.116584,377.496991 200.766636,360.965366 C212.416689,344.433741 228.59069,324.381297 245.543677,315.028075 C262.496665,305.674853 267.960932,300.85907 279.931822,300.85907 C287.912416,300.85907 377.421093,297.128993 517.074859,298.746022 C546.408192,300.437033 567.345409,306.011119 576.678742,312.677786 C590.678742,322.677786 596.666878,334.808673 596.666878,352.961561 C596.666878,365.063487 596.666878,385.604431 596.666878,436.835839 C596.666878,445.108857 596.624303,456.738236 594.958297,458.061633 C593.29229,459.385031 580.484345,461.971971 573.817678,460.591534"
            id="jiantou"
            stroke="#979797"
          ></path>
          <path
            d="M76.212169,1146.12052 L179.708533,1146.12052 C179.964155,1045.38343 179.964155,990.901985 179.708533,982.676176 C178.597005,946.907781 179.708533,972.105789 179.708533,953.216121 C179.708533,934.326452 182.650122,910.524876 172.265918,891.851081 C167.26348,882.855254 144.212179,861.833754 138.039029,850.226246 C137.218474,850.226246 129.799907,816.20511 129.799907,795.050781 C129.799907,785.944224 130.588607,741.813272 130.620463,666.048047 C130.632115,638.335564 130.358596,582.52677 129.799907,498.621666 C131.331275,464.152742 132.87128,441.521041 134.419922,430.726563 C136.742885,414.534844 168.05848,357.787484 179.708533,341.255859 C191.358585,324.724234 215.621232,311.692811 232.574219,302.339589 C249.527207,292.986367 274.415829,292.304688 286.386719,292.304688 C294.367313,292.304688 382.951198,290.687658 522.604964,292.304688 C551.938297,293.995699 549.925078,296.596676 558.66945,305.207031 C569.301539,315.676172 568.14521,335.623979 568.14521,353.776867 C568.14521,361.844817 568.188909,389.107014 568.276308,435.563457 L568.276308,451.058824 L519.066627,451.058824"
            id="car"
            stroke="#979797"
          ></path>
          <path
            d="M519.066627,451.059095 C551.873081,451.019698 568.276308,451.019698 568.276308,451.059095 C568.276308,451.117647 568.276308,422.569517 568.276308,391.782317"
            id="car2"
            stroke="#979797"
          ></path>
          <path
            d="M568.276308,391.782318 C568.276308,748.886297 568.276308,941.490673 568.276308,969.595445 C568.276308,1011.7526 537.7334,1033.21893 511.379417,1033.21893 C494.693413,1033.21893 232.085956,1033.21893 211.443229,1033.21893 C190.800501,1033.21893 185.114757,1038.6973 185.114757,1057.56876 C185.114757,1068.89929 185.114757,1118.53468 185.114757,1133.25603 C185.114757,1147.97737 196.382989,1156.5 208.558951,1156.5 C216.676258,1156.5 239.892494,1156.5 278.207659,1156.5"
            id="out"
            stroke="#979797"
          ></path>
          <path
            d="M603.276308,454.447059 C603.276308,770.441211 603.276308,942.490673 603.276308,970.595445 C603.276308,1012.7526 572.7334,1040.21893 546.379417,1040.21893 C529.693413,1040.21893 281.085956,1040.21893 260.443229,1040.21893 C239.800501,1040.21893 234.114757,1045.6973 234.114757,1064.56876 C234.114757,1075.89929 234.114757,1124.53468 234.114757,1139.25603 C234.114757,1153.97737 245.382989,1164.5 257.558951,1164.5 C265.676258,1164.5 285.559161,1164.5 317.207659,1164.5"
            id="jiantou2"
          ></path>
        </g>
      </g>
    </svg>
    <img src="../assets/shareImg/mapbg.png" alt="" class="dbg absolute top-0" />
    <!-- <img src="../assets/shareImg/mapbg.png" alt="" class="absolute top-0 opacity-50" /> -->
  </div>
</template>

<script>
export default {
  name: "Park01",
  props: {
    msg: String,
  },
  mounted() {
    setTimeout(() => {
      this.$anime({
        targets: ".demo",
        translateX: 250,
      });
      console.log(
        'this.$anime.path("#jiantou") :>> ',
        this.$anime.path("#jiantou")
      );

      let path = this.$anime.path("#jiantou");
      let path2 = this.$anime.path("#car");
      let path3 = this.$anime.path("#car2");
      let path4 = this.$anime.path("#out");
      let path5 = this.$anime.path("#jiantou2");

      let myTimeline = this.$anime.timeline();
      myTimeline
        .add({
          targets: ".o1",
          delay: 1000,
          // easing: "linear",
          loopComplete: function () {
            console.log("o1 结束");
            const el = document.querySelector(".o1");
            el.classList.remove("hidden");
            const el2 = document.querySelectorAll(".jiantou");
            el2.forEach((el) => {
              el.classList.remove("hidden");
            });
          },
        })
        .add(
          {
            targets: ".jiantou",
            translateX: path("x"),
            translateY: path("y"),
            rotate: path("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
          },
          "+=1000"
        )
        .add(
          {
            targets: ".car",
            translateX: path2("x"),
            translateY: path2("y"),
            rotate: path2("angle"),
            easing: "linear",
            opacity: 1,
            delay: 0,
            duration: 4500,
            loop: false,
            loopComplete: function () {
              let car = document.querySelector(".car");
              let car2 = document.querySelector(".car2");
              car2.classList.remove("hidden");
              car.classList.add("hidden");
              car2.classList.remove("car2style");
              setTimeout(() => {
                let el = document.querySelector(".o1");
                el.classList.add("hidden");
                const el2 = document.querySelectorAll(".jiantou");
                el2.forEach((el) => {
                  el.classList.add("hidden");
                });
              }, 1000);

              setTimeout(() => {
                let el = document.querySelector(".o2");
                el.classList.remove("hidden");
              }, 2000);
            },
          },
          "-=4200"
        )
        .add({
          targets: ".car2",
          translateX: path3("x"),
          translateY: path3("y"),
          rotate: path3("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 2000,
          loop: false,
          begin: function () {
            let car2 = document.querySelector(".car2");
            car2.classList.remove("car2style");
          },
        })
        .add({
          targets: ".car3",
          translateX: path4("x"),
          translateY: path4("y"),
          rotate: path4("angle"),
          easing: "linear",
          opacity: 1,
          delay: 2000,
          duration: 4000,
          loop: false,
          loopComplete: function () {},
          begin: function () {
            // console.log('开始');
            let car2 = document.querySelector(".car2");
            car2.classList.add("hidden");
            let car3 = document.querySelector(".car3");
            car3.classList.remove("hidden");
            car3.classList.remove("car3style");
          },
        })
        .add(
          {
            targets: ".jiantou2",
            translateX: path5("x"),
            translateY: path5("y"),
            rotate: path5("angle"),
            easing: "linear",
            opacity: 1,
            delay: this.$anime.stagger(200),
            duration: 4000,
            loop: false,
            begin: function () {
              const el = document.querySelectorAll(".jiantou2");
              el.forEach((el) => {
                el.classList.remove("hidden");
              });
            },
          },
          "-=6000"
        );
    }, 0);
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
/* .dbg{
  position: absolute;
  top: 0;
} */
.car2style {
  top: 451px;
  left: 519px;
}
.car3style {
  top: 370px;
  left: 590px;
}

svg {
  @apply absolute top-0;
}
</style>
