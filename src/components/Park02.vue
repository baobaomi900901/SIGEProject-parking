<!--
* @name 02_停车指引图_11-16号门_驶入&驶出
* @date 2022-03-04 19:16:48
* @version V1.0.0
!-->
<template>
  <div class="relative box bg-gray-600">
    <div class="o1 hidden">
      <span
        class="
          enterTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶入
      </span>
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="qidian absolute z-30"
        style="top: 1143px; left: 191px"
      />
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="zhongdian absolute z-30"
        style="top: 748px; left: 200px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi absolute z-30"
        style="top: 683px; left: 192px"
      />
      <img
        src="../assets/unShareImg/驶入路劲-02.png"
        alt=""
        class="enterSVG absolute z-10"
        style="top: 751px; left: 157px"
      />
    </div>
    <div class="o2 hidden">
      <span
        class="
          outTitle
          z-50
          absolute
          bg-blue-500
          w-64
          h-16
          text-4xl text-center
        "
        style="
          top: 32px;
          left: 248px;
          line-height: 64px;
          background: rgba(0, 0, 0, 0.2);
        "
      >
        车辆驶出
      </span>
      <img
        src="../assets/shareImg/终点.png"
        alt=""
        class="qidian2 absolute z-30"
        style="top: 748px; left: 200px"
      />
      <img
        src="../assets/shareImg/起点.png"
        alt=""
        class="zhongdian2 absolute z-30"
        style="top: 1156px; left: 306px"
      />
      <img
        src="../assets/shareImg/终点标识.png"
        alt=""
        class="biaoshi2 absolute z-30"
        style="top: 1100px; left: 298px"
      />
      <img
        src="../assets/unShareImg/驶出路劲-02.png"
        alt=""
        class="outSVG absolute z-10"
        style="top: 753px; left: 158px"
      />
    </div>
    <img src="../assets/shareImg/car.png" alt="" class="car absolute z-50" />
    <img
      src="../assets/shareImg/car2.png"
      alt=""
      class="car2 car2style absolute z-40"
    />
    <img
      src="../assets/shareImg/car3left.png"
      alt=""
      class="car3 car3style absolute z-50 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou absolute z-10 hidden" /> -->

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />

    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <img
      src="../assets/shareImg/箭头r.png"
      alt=""
      class="jiantou2 absolute z-10 hidden"
    />
    <!-- <img src="../assets/shareImg/箭头r.png" alt="" class="jiantou2 absolute z-10 hidden" /> -->
    <svg
      width="750px"
      height="1206px"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g
        id="页面-1"
        stroke="none"
        stroke-width="1"
        fill="none"
        fill-rule="evenodd"
      >
        <g id="mapsvg">
          <rect id="矩形" x="0" y="0" width="750" height="1206"></rect>
          <path
            d="M205,1148 C202.952543,1148.10757 220,1152.91425 220,1133 C220,1113.08575 220,1029.43476 219,960.5 C218.666638,937.519787 218.724753,921.431633 211.5,905.026356 C204.275247,888.621078 193.75459,876.353819 189.341283,873.529412 C178.244555,866.427782 146.391588,781.211461 170,761 C177.136539,754.890318 191.803206,753.223651 214,756"
            id="jiantou"
          ></path>
          <path
            d="M76.212169,1146.12052 L179.708533,1146.12052 C179.964155,1045.38343 179.964155,990.901985 179.708533,982.676176 C178.597005,946.907781 179.708533,972.105789 179.708533,953.216121 C179.708533,934.326452 182.650122,910.524876 172.265918,891.851081 C167.26348,882.855254 144.212179,861.833754 138.039029,850.226246 C137.218474,850.226246 129.799907,816.20511 129.799907,795.050781 C129.799907,788.979743 129.799907,776.557666 129.799907,757.78455 C130.151282,751.261517 135.521353,748 145.910121,748 C156.298889,748 180.662182,748 219,748"
            id="car"
          ></path>
          <path
            d="M219,748 C194.995724,748 176.719366,748 164.170926,748 C145.348267,748 144.648483,748 144.648483,726.513758 C144.648483,712.189597 144.648483,687.65649 144.648483,652.914437"
            id="car2"
          ></path>
          <path
            d="M144.648483,652.914437 L144.648483,844.920533 C169.432322,871.918121 181.824241,889.308214 181.824241,897.090811 C181.824241,904.873407 181.824241,983.333312 181.824241,1132.47052 C180.372672,1148.58346 187.42912,1156.72202 202.993586,1156.88621 C218.558052,1157.05039 255.935938,1157.05039 315.127244,1156.88621"
            id="out"
          ></path>
          <path
            d="M214,756 L189,754.698561 C170.056404,755.714956 160.887495,766.658476 161.493274,787.529121 C162.401942,818.83509 177.465117,861.870867 187.732558,872.314543 C198,882.758219 218,901.865327 218,932.021732 C218,962.178137 218,1129.25121 219,1138.58443 C220,1147.91765 218.85329,1159.54118 235.758202,1159 C247.028143,1158.63922 275.775409,1158.63922 322,1159"
            id="jiantou2"
          ></path>
        </g>
      </g>
    </svg>
    <img src="../assets/shareImg/mapbg.png" alt="" class="dbg absolute top-0" />
    <!-- <img src="../assets/shareImg/mapbg.png" alt="" class="absolute top-0 opacity-50" /> -->
  </div>
</template>

<script>
export default {
  name: "Park02",
  props: {
    msg: String,
  },
  mounted() {
        setTimeout(() => {
    this.$anime({
      targets: ".demo",
      translateX: 250,
    });
    console.log(
      'this.$anime.path("#jiantou") :>> ',
      this.$anime.path("#jiantou")
    );

    let path = this.$anime.path("#jiantou");
    let path2 = this.$anime.path("#car");
    let path3 = this.$anime.path("#car2");
    let path4 = this.$anime.path("#out");
    let path5 = this.$anime.path("#jiantou2");

    let myTimeline = this.$anime.timeline();
    myTimeline
      .add({
        targets: ".o1",
        delay: 1000,
        // easing: "linear",
        loopComplete: function () {
          console.log("o1 结束");
          const el = document.querySelector(".o1");
          el.classList.remove("hidden");
          const el2 = document.querySelectorAll(".jiantou");
          el2.forEach((el) => {
            el.classList.remove("hidden");
          });
        },
      })
      .add(
        {
          targets: ".jiantou",
          translateX: path("x"),
          translateY: path("y"),
          rotate: path("angle"),
          easing: "linear",
          opacity: 1,
          delay: this.$anime.stagger(200),
          duration: 4000,
          loop: false,
        },
        "+=1000"
      )
      .add(
        {
          targets: ".car",
          translateX: path2("x"),
          translateY: path2("y"),
          rotate: path2("angle"),
          easing: "linear",
          opacity: 1,
          delay: 0,
          duration: 4500,
          loop: false,
          loopComplete: function () {
            let car = document.querySelector(".car");
            let car2 = document.querySelector(".car2");
            car2.classList.remove("hidden");
            car.classList.add("hidden");
            car2.classList.remove("car2style");
            setTimeout(() => {
              let el = document.querySelector(".o1");
              el.classList.add("hidden");
              const el2 = document.querySelectorAll(".jiantou");
              el2.forEach((el) => {
                el.classList.add("hidden");
              });
            }, 1000);
            setTimeout(() => {
              let el = document.querySelector(".o2");
              el.classList.remove("hidden");
            }, 2000);
          },
        },
        "-=4200"
      )
      .add({
        targets: ".car2",
        translateX: path3("x"),
        translateY: path3("y"),
        rotate: path3("angle"),
        easing: "linear",
        opacity: 1,
        delay: 2000,
        duration: 2000,
        loop: false,
        begin: function () {
          let car2 = document.querySelector(".car2");
          car2.classList.remove("car2style");
        },
      })
      .add({
        targets: ".car3",
        translateX: path4("x"),
        translateY: path4("y"),
        rotate: path4("angle"),
        easing: "linear",
        opacity: 1,
        delay: 2000,
        duration: 4000,
        loop: false,
        loopComplete: function () {},
        begin: function () {
          // console.log('开始');
          let car2 = document.querySelector(".car2");
          car2.classList.add("hidden");
          let car3 = document.querySelector(".car3");
          car3.classList.remove("hidden");
          car3.classList.remove("car3style");
        },
      })
      .add(
        {
          targets: ".jiantou2",
          translateX: path5("x"),
          translateY: path5("y"),
          rotate: path5("angle"),
          easing: "linear",
          opacity: 1,
          delay: this.$anime.stagger(200),
          duration: 4000,
          loop: false,
          begin: function () {
            const el = document.querySelectorAll(".jiantou2");
            el.forEach((el) => {
              el.classList.remove("hidden");
            });
          },
        },
        "-=6000"
      );
          }, 0);
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
/* .dbg{
  position: absolute;
  top: 0;
} */
.car2style {
  position: absolute;
  top: 748px;
  left: 180px;
}
.car3style {
  top: 370px;
  left: 590px;
}

svg {
  @apply absolute top-0;
}
</style>